  <!-- Weekly Offs -->
  <p-toast></p-toast>
  <!-- Academic Calendar Top Section -->
  <p-card header="Academic Calendar" class="mb-4">
    <hr class="border-t border-gray-200 my-3" />
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div class="flex items-center gap-3">
        <label for="academic-year" class="font-bold mr-2">Academic Year</label>
        <p-select inputId="academic-year"
          [(ngModel)]="selectedAcademicYear"
          [options]="academicYears"
          optionLabel="label"
          placeholder="Select Academic Year"
          [style]="{'width':'220px'}"
          styleClass="w-full md:w-auto"
          (ngModelChange)="onAcademicYearChange($event)">
        </p-select>
      </div>

      <div class="text-right">
        <div class="text-sm text-gray-600">Showing calendar for</div>
        <div class="font-semibold">{{ selectedAcademicYear?.label || 'All Years' }}</div>
      </div>
    </div>
  </p-card>
  <p-card header="Weekly Offs">
    <hr class="border-t border-gray-200 my-3" />
    <div class="flex flex-wrap gap-2 mb-4">
      <ng-container *ngFor="let d of daysOfWeek">
        <button pButton type="button" (click)="toggleWeeklyDay(d)" [attr.aria-pressed]="isDayOff(d)"
          [ngClass]="[ isDayOff(d) ? 'p-button-success' : 'p-button-outlined p-button-success', 'w-full sm:w-auto' ]">
          {{ d.label }}
        </button>
      </ng-container>
    </div>
  </p-card>

  <!-- Holidays -->
  <p-card header="Holidays/Exception working">
    <hr class="border-t border-gray-200 my-3" />

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
      <div>
        <label for="holiday-date" class="block font-bold mb-2">Holiday Date</label>
        <p-datepicker inputId="holiday-date" [(ngModel)]="holidayDate" dateFormat="yy-mm-dd" [style]="{'width':'100%'}" styleClass="w-full"></p-datepicker>
      </div>

      <div>
        <label for="holiday-title" class="block font-bold mb-2">Holiday Title</label>
        <input id="holiday-title" type="text" pInputText [(ngModel)]="holidayTitle" placeholder="Holiday Title" class="w-full" />
      </div>

      <div>
        <label for="holiday-type" class="block font-bold mb-2">Type</label>
        <p-select inputId="holiday-type" 
          [(ngModel)]="holidayType" 
          [options]="holidayTypes" 
          optionLabel="label" 
          placeholder="Type"
          [style]="{'width':'100%'}"
          styleClass="w-full">
        </p-select>
      </div>

      <div class="flex items-end gap-2">
        <button *ngIf="!editingHoliday" pButton label="Add Holiday" icon="pi pi-plus" (click)="addHoliday()" aria-label="Add Holiday"></button>
        <div *ngIf="editingHoliday" class="flex gap-2">
          <button pButton label="Update Holiday" icon="pi pi-check" (click)="addHoliday()"></button>
          <button pButton label="Cancel" class="p-button-outlined" (click)="cancelEditHoliday()"></button>
        </div>
      </div>
    </div>

    <p-table [value]="holidays" dataKey="id" class="mt-4">
      <ng-template pTemplate="header">
        <tr>
          <th>Date</th>
          <th>Title</th>
          <th>Type</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-h>
        <tr>
          <td>{{ h.date }}</td>
          <td>{{ h.title }}</td>
          <td>{{ h.type }}</td>
          <td class="flex gap-2">
            <button pButton icon="pi pi-pencil" class="p-button-secondary" (click)="startEditHoliday(h)"></button>
            <button pButton icon="pi pi-trash" severity="danger" (click)="removeHoliday(h)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>

  <!-- Exception Working Days removed: use holiday.type='WorkingDay' instead -->
